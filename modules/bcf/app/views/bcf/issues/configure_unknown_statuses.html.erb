<%= stylesheet_link_tag 'bcf/bcf.css' %>
<%= toolbar title: t('bcf.bcf_xml.import_title') %>

<%= form_tag({ action: :configure_import }, multipart: true, method: :post) do %>
  <%= render 'import_options_hidden_fields' %>
  <h3><%= t('bcf.bcf_xml.import.invalid_statuses_found') %></h3>
  <ul>
    <% @importer.aggregations.unknown_statuses.each do |name| %>
      <li> <%= name.present? ? name : "(#{t('bcf.bcf_xml.import.no_status_provided')})" %></li>
    <% end %>
  </ul>
  <div class="form--field">
    <input type="hidden" name="import_options[unknown_statuses_action]" value="chose">
    <%= t('bcf.bcf_xml.import.import_statuses_as') %>&nbsp;
    <% options = Status.all.collect { |status| [status.name, status.id] } %>
    <%= styled_select_tag 'import_options[unknown_statuses_chose_ids][]',
                          options_for_select(options),
                          multiple: false,
                          no_label: true,
                          title:    l(:label_status),
                          tabIndex: 0,
                          class:    'form--select form--inline-select',
                          container_class: '-slim',
                          id:       'unknown_statuses_chose_ids' %>
  </div>

  <%= submit_tag t('bcf.bcf_xml.import.button_proceed'), class: 'button -highlight' %>
  <%= link_to t(:button_cancel),
              project_work_packages_bcf_issues_path(@project),
              class: 'button' %>
<% end %>

